<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><title>æ”¯ä»˜å®å°ç¨‹åº Redux Binding - Front-End Engineering</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="../assets/css/bulma.min.css"><link rel="stylesheet" href="../assets/css/app.css"><!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="shortcut icon" href=""></head><body dir="ltr"><nav class="columns navbar"><div class="column logo is-3 is-offset-1"><a class="is-brand" href="../index.html">Front-End Engineering</a></div></nav><div class="columns content"><div class="column is-2-desktop is-3-widescreen is-hidden-touch"></div><div class="column article-container is-11-tablet is-8-desktop is-6-widescreen"><div class="breadcrumb-area"><a href="../index.html" class="breadcrumb-item">Home</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../Tech/index.html" class="breadcrumb-item">Tech</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../Tech/2018-11.28-tinyapp-redux.html" class="breadcrumb-item">æ”¯ä»˜å®å°ç¨‹åº Redux Binding</a></div><h1 class="article-title">æ”¯ä»˜å®å°ç¨‹åº Redux Binding</h1><p>ä½œè€…ï¼šå¼ æ–°</p><div class="article"><p><a href="https://mini.open.alipay.com/channel/miniIndex.htm" target="_blank" rel="noopener">æ”¯ä»˜å®å°ç¨‹åº</a>äº 2017.08 æœˆå¼€å§‹å…¬æµ‹ï¼Œå®ƒæ˜¯ä¸€ç§å…¨æ–°çš„å¼€æ”¾æ¨¡å¼ï¼Œè¿è¡Œåœ¨æ”¯ä»˜å®å®¢æˆ·ç«¯ï¼Œå¯ä»¥è¢«ä¾¿æ·åœ°è·å–å’Œä¼ æ’­ï¼Œä¸ºç»ˆç«¯ç”¨æˆ·æä¾›æ›´ä¼˜çš„ç”¨æˆ·ä½“éªŒã€‚</p><p>åŒæ—¶ï¼Œæ”¯ä»˜å®å°ç¨‹åºä¹Ÿä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å¼€å‘èµ„æºï¼ŒåŒ…æ‹¬å¼€å‘ IDEï¼Œ<a href="https://docs.alipay.com/mini/component/overview" target="_blank" rel="noopener">å°ç¨‹åºç»„ä»¶</a>ï¼Œä¸°å¯Œçš„ JSAPI å’Œå¼€æ”¾æ¥å£ï¼Œä»¥åŠå„ç§è°ƒè¯•å·¥å…·å’Œæœ€ä½³å¼€å‘å®è·µç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å›¢é˜Ÿåœ¨å¼€å‘æ—¶ä»ç„¶ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œæœ¬ç¯‡ä¸»è¦è®¨è®ºå¦‚ä½•è§£å†³æ•´ä¸ªå°ç¨‹åº Web App çš„çŠ¶æ€ç®¡ç†ã€‚</p><p>ç›®å‰ï¼Œå›¢é˜Ÿé‡Œé¢å¾ˆå¤šå‰ç«¯åŒå­¦éƒ½æ˜¯æœ‰ React + Redux å¼€å‘æŠ€æœ¯èƒŒæ™¯ï¼Œæ‰€ä»¥ç¬¬ä¸€è€ƒè™‘å°±æ˜¯æä¾›åŸºäºæ”¯ä»˜å°ç¨‹åºçš„ Redux Bindingï¼Œä»¥ä¾¿æ— ç¼å¯¹æ¥ï¼Œå¿«é€Ÿå¼€å‘ï¼Œæ²¡æœ‰å­¦ä¹ æˆæœ¬ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›å®ƒèƒ½æä¾›å¦‚ä¸‹çš„åŠŸèƒ½ï¼š</p><ul><li>æä¾›å’Œ <a href="https://github.com/reduxjs/react-redux" target="_blank" rel="noopener">react-redux </a>ä¸€æ ·ç®€å•æ–¹ä¾¿çš„ API (Provider &amp; connect)</li><li>åŒæ—¶æ”¯æŒ <a href="https://docs.alipay.com/mini/framework/custom-component-overview" target="_blank" rel="noopener">Component</a> å’Œ <a href="https://docs.alipay.com/mini/framework/page" target="_blank" rel="noopener">Page</a></li></ul><p>ç„¶åå°±æœ‰äº† <a href="https://github.com/starandtina/tinyapp-redux" target="_blank" rel="noopener">tinyapp-redux</a> ğŸ˜ƒ ï¼Œé‚£ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å’Œæ”¯ä»˜å®ä¸ç¨‹åºåè°ƒå·¥ä½œï¼Œæ¥å¸®æˆ‘ä»¬ç»Ÿä¸€ç®¡ç†æ•°æ®æµçš„å‘¢ï¼ŸåŸç†ä¸ react-redux å¼‚æ›²åŒå·¥ï¼Œè¿˜æ˜¯åˆ†äºŒæ­¥èµ°ï¼š</p><h2 id="installation">Installation <a class="markdownIt-Anchor" href="#installation">#</a></h2><pre class="hljs"><code>npm install --save tinyapp-redux
</code></pre><h2 id="provider">Provider <a class="markdownIt-Anchor" href="#provider">#</a></h2><p>tinyapp-redux æä¾›äº† <code>Provider</code> ï¼Œå®ƒå¯ä»¥è®© <code>Redux store</code> åœ¨å…¶å®ƒçš„å°ç¨‹åºé¡µé¢æˆ–æ˜¯ç»„ä»¶ä¸­éƒ½å¯ä»¥ç›´æ¥ <code>connect</code> è‡ªå·±éœ€è¦çš„æ•°æ®ã€‚</p><p><strong>app.js</strong></p><pre class="hljs"><code><span class="hljs-keyword">import</span> { Provider } <span class="hljs-keyword">from</span> <span class="hljs-string">'tinyapp-redux'</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./createStore'</span>

App(
  Provider(store)({
    onLaunch(options) {
      <span class="hljs-comment">// å°ç¨‹åºåˆå§‹åŒ–</span>
    },
    ...
  }),
)
</code></pre><p><strong>createStore.js</strong></p><pre class="hljs"><code><span class="hljs-keyword">import</span> { createStore, applyMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-logger'</span>
<span class="hljs-keyword">import</span> rootReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'./reducers'</span>

<span class="hljs-keyword">const</span> initState = {
  <span class="hljs-attr">todos</span>: [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning Javascript'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning ES2019'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">true</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning æ”¯ä»˜å®å°ç¨‹åº'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">true</span> },
  ],
}

<span class="hljs-keyword">const</span> store = createStore(rootReducer, initState, applyMiddleware(logger))


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre><p>æˆ–è€…é€šè¿‡é»˜è®¤æä¾›çš„ <code>injectStore</code> å‡½æ•°æ¥æ³¨å…¥å½“å‰ <code>store</code></p><p><strong>app.js</strong></p><pre class="hljs"><code><span class="hljs-keyword">import</span> { createStore, applyMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>
<span class="hljs-keyword">import</span> { injectStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'tinyapp-redux'</span>
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-logger'</span>

<span class="hljs-keyword">import</span> rootReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'./reducers'</span>

<span class="hljs-keyword">const</span> initState = {
  <span class="hljs-attr">todos</span>: [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning Javascript'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning ES2019'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">true</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learning æ”¯ä»˜å®å°ç¨‹åº'</span>, <span class="hljs-attr">completed</span>: <span class="hljs-literal">true</span> },
  ],
}

App({
  onLaunch() {
    <span class="hljs-keyword">this</span>.store = createStore(rootReducer, initState, applyMiddleware(logger))

    injectStore(<span class="hljs-keyword">this</span>.store) <span class="hljs-comment">// inject the store into the tiny app</span>
  },
})
</code></pre><h2 id="connect">Connect <a class="markdownIt-Anchor" href="#connect">#</a></h2><p>tinyapp-redux æä¾›äº†ä¸€ä¸ª <code>connect</code> å‡½æ•°ï¼Œç”¨äºç»‘å®šå°ç¨‹åºé¡µé¢/ç»„ä»¶åˆ° <code>Redux store</code> ï¼Œä»è€Œå¾ˆæ–¹ä¾¿åœ°å»è·å–ä»»ä½•éœ€è¦çš„æ•°æ®ã€‚</p><pre class="hljs"><code><span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'tinyapp-redux'</span>

<span class="hljs-keyword">import</span> {
  toggleTodo,
  setVisibilityFilter,
  VisibilityFilters,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../actions'</span>
<span class="hljs-keyword">import</span> { getVisibleTodos } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../reducers'</span>

<span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({
  <span class="hljs-attr">todos</span>: getVisibleTodos(state, state.visibilityFilter),
})

Page(
  connect(
    mapStateToProps,
    { toggleTodo },
    {
      <span class="hljs-attr">data</span>: { VisibilityFilters },
      onTodoChanged(e) {
        <span class="hljs-keyword">this</span>.data.toggleTodo(e.target.dataset.id)
      },
      addTodo() {
        my.navigateTo({ <span class="hljs-attr">url</span>: <span class="hljs-string">'../add-todo/add-todo'</span> })
      },
    },
  ),
)
</code></pre><p>tinyapp-redux å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†æ”¯ä»˜å®å°ç¨‹åºçš„æ•°æ®æµï¼Œé‚£ä¹ˆå¦‚ä½•ç»„ç»‡æ•´ä¸ªä»£ç ç»“æ„? Stay tuned!</p></div><div dir="ltr" class="level article-bar is-mobile"><div class="level-item has-text-centered"><a title="previous page" class="previouse-article-link" href="../Tech/2018-08-25-full-stack-engineering.html"><span class="icon icon-previous" data-icon="previous"></span><span class="link-content">&laquo; Previous</span></a></div><div class="level-item has-text-centered"><a title="font size" class="link-item link-item-size"><span class="icon icon-size" data-icon="size"></span></a></div><div class="level-item has-text-centered"><a title="table of content" class="link-item link-item-toc"><span class="icon icon-toc" data-icon="toc"></span></a></div><div class="level-item has-text-centered"><a title="top" href="#"><span class="icon icon-up" data-icon="up"></span> <span class="link-content">â¤Š Top</span></a></div><div class="level-item has-text-centered"><a title="next page" class="next-article-link" href="../Tech/Active/index.html"><span class="icon icon-next" data-icon="next"></span><span class="link-content">Next &raquo;</span></a></div></div></div><div class="column is-2-widescreen is-hidden"></div></div><div class="columns foot"><div class="column is-8 is-offset-1 license"><p>ç½‘ç«™å†…å®¹è®¸å¯è¯ï¼šå…¬å…±é¢†åŸŸï¼ˆpublic domainï¼‰</p></div><div class="column is-3 build-by">Build by <a href="https://github.com/ruanyf/loppo" target="_blank">Loppo</a> 0.6.15</div></div><div class="book-toc notification is-warning is-hidden"><h3>Table of chapters &nbsp;<span class="title-close"><a class="button is-danger"> Close</a></span></h3><ul class="chapter-area"><li class="chapter-item"><a href="../2019-09-04-talent-requirement.html">å¯¹äººæ‰çš„è¦æ±‚</a></li><li class="chapter-item"><a href="../Tech/index.html">Tech</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-collapse" data-icon="collapse"></span></a></li><ul class="chapter-level-1 chapter-level-1-current"><li class="chapter-item"><a href="../Tech/2017-09-01-checklist-job-offer.html">å·¥ä½œæœºä¼šçš„æ£€æŸ¥æ¸…å•</a></li><li class="chapter-item"><a href="../Tech/2017-11-03-front-end-development-process.html">å‰ç«¯å¼€å‘æµç¨‹</a></li><li class="chapter-item"><a href="../Tech/2018-03-14-move-from-sb-to-code.html">æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒ Sublime Text è€Œè½¬å‘ VSCï¼Ÿ</a></li><li class="chapter-item"><a href="../Tech/2018-03-27-my-git-styleguide.html">My Personal Git Styleguide</a></li><li class="chapter-item"><a href="../Tech/2018-08-25-full-stack-engineering.html">WTF Full-Stack Engineering</a></li><li class="chapter-item chapter-item-current"><a href="../Tech/2018-11.28-tinyapp-redux.html">æ”¯ä»˜å®å°ç¨‹åº Redux Binding</a></li><li class="chapter-item"><a href="../Tech/Active/index.html">Active</a></li><ul class="chapter-level-2"><li class="chapter-item"><a href="../Tech/Active/2017-09-25-active-development-workflow.html">æ´»è·ƒç½‘ç»œå‰ç«¯å¼€å‘æµç¨‹</a></li><li class="chapter-item"><a href="../Tech/Active/2017-10-19-front-end-engineering-in-active.html">æ´»è·ƒç½‘ç»œçš„å‰ç«¯å·¥ç¨‹åŒ–å®è·µä¹‹è·¯</a></li><li class="chapter-item"><a href="../Tech/Active/2017-10-23-active-china-fee-hiring-process.html">Active China Front-End Engineer Hiring Process</a></li></ul><li class="chapter-item"><a href="../Tech/React/index.html">React</a></li><ul class="chapter-level-2"><li class="chapter-item"><a href="../Tech/React/2017-06-04-how-we-structure-react-redux-project-stucture.html">æˆ‘ä»¬å¦‚ä½•ç»„ç»‡ React + Redux é¡¹ç›®ç»“æ„</a></li><li class="chapter-item"><a href="../Tech/React/2017-08-07-how-do-we-normalize-state.html">æˆ‘ä»¬å¦‚ä½•èŒƒå¼åŒ– Redux çŠ¶æ€çš„</a></li><li class="chapter-item"><a href="../Tech/React/2017-09-08-the-simplicity-of-redux.html">Redux çš„ç®€å•æ€§</a></li><li class="chapter-item"><a href="../Tech/React/2017-09-18-how-do-we-implement-i18n-based-on-react.html">æˆ‘ä»¬å¦‚ä½•åŸºäº React å®ç° i18n</a></li></ul></ul><li class="chapter-item"><a href="../life/index.html">life</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../life/2016-08-30-keys-to-have-health-relationship.html">ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œå¦‚ä½•å»ç»´ç³»å’Œå¢è¿›å¥åº·çš„äººé™…å…³ç³»ï¼Ÿ</a></li><li class="chapter-item"><a href="../life/2018-03-13-maintaining-a-healthy-work-life-balance.html">å¦‚ä½•åœ¨å·¥ä½œå’Œå·¥ä½œä¸­æ‰¾åˆ°ä¸€ä¸ªå¥åº·çš„å¹³è¡¡å‘¢ï¼Ÿ</a></li></ul></ul></div><div class="progress-indicator"></div><!-- SCRIPTS --><script>var LOPPO={current_path:"Tech/2018-11.28-tinyapp-redux.md",relative_root_path:"../",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#installation">Installation</a></li>\n<li><a href="#provider">Provider</a></li>\n<li><a href="#connect">Connect</a></li>\n</ul>\n'}</script><script src="../assets/js/app.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8abfc12836cb16954eaaccc965864e54";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>